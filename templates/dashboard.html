<!DOCTYPE html>
<html>
<head>
  <title>Merchant Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: white;
      padding: 20px;
    }
    h2, h3 {
      text-align: center;
      margin-bottom: 15px;
    }
    .orders-section {
      margin-top: 30px;
    }
    .order-card {
      background: #222;
      border-left: 5px solid orange;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
    }
    .order-card p {
      margin: 5px 0;
    }
    .order-card strong {
      color: orange;
    }
    .item-list {
      margin-top: 10px;
      padding-left: 20px;
    }
    .item-list div {
      margin-bottom: 3px;
      font-size: 0.95em;
    }
    .order-status {
      font-weight: bold;
      margin-top: 10px;
      color: #00bcd4; /* Light blue for status */
    }
    .actions {
      margin-top: 15px;
      display: flex;
      flex-wrap: wrap; /* Allows buttons to wrap on smaller screens */
      gap: 10px; /* Space between buttons */
    }
    .btn {
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      font-size: 15px;
      cursor: pointer;
      text-decoration: none;
      color: white;
      text-align: center;
      flex: 1; /* Distribute space among buttons */
      min-width: 120px; /* Minimum width for buttons */
    }
    .btn.packed {
      background: #ffa500; /* Orange */
    }
    .btn.completed {
      background: #4CAF50; /* Green */
    }
    .btn.delete {
      background: #f44336; /* Red */
    }
    .no-orders-msg {
      text-align: center;
      color: gray;
      margin-top: 20px;
    }
    .logout-btn {
      display: block;
      width: 100%;
      max-width: 300px; /* Limit width */
      text-align: center;
      padding: 12px;
      margin: 30px auto 0; /* Center and add top margin */
      background: red;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      font-size: 17px;
    }
  </style>
</head>
<body>
  <h2>Welcome, {{ username }} ðŸ‘‹</h2>
  <h3>Your Shop: <u>{{ shop_name }}</u></h3>

  <div class="orders-section">
    <h3>Incoming Orders:</h3>
    {% if orders %}
      {% for order in orders %}
        <div class="order-card">
          <p><strong>Order ID:</strong> {{ order['id'] }}</p>
          <p><strong>Customer:</strong> {{ order['user'] }}</p>
          <p><strong>Items:</strong></p>
          <div class="item-list">
            {% if order['items'] is string %}
              <div>{{ order['items'] }}</div>
            {% else %}
              {% for item in order['items'] %}
                <div>{{ item.name }} (Qty: {{ item.qty }})</div>
              {% endfor %}
            {% endif %}
          </div>
          <p class="order-status"><strong>Status:</strong> {{ order['status'] }}</p>
          <div class="actions">
            <a class="btn packed" href="/mark/{{ order['id'] }}/packed">Mark as Packed</a>
            <a class="btn completed" href="/mark/{{ order['id'] }}/completed">Mark as Completed</a>
            <a class="btn delete" href="/delete_order/{{ order['id'] }}" onclick="return confirm('Are you sure you want to delete this order? This action cannot be undone.');">Delete Order</a>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p class="no-orders-msg">No incoming orders yet.</p>
    {% endif %}
  </div>

  <a class="logout-btn" href="/logout">Logout</a>
</body>
</html>